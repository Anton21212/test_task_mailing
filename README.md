# MAILING
Cервис для управления рассылками.

## Установка

1. Склонировать репозиторий с помощью команды:

```shell
git clone https://github.com/Anton21212/test_task_mailing.git
```

2. Перейти в папку проекта.

## Запуск

```shell
sudo docker-compose -p "mailing" --file "docker-compose.yml" up --build
```



## Раздел особенности работы
    
При добавлении новых клиентов им будут отправлены сообщения из активных рассылок.

Текст сообщения рассылки печатается в консоль.



## Использование

Для регистрации нового клиента используется эндпоинт `http://localhost:81/mailing/clients`. Для обращения к нему
нужно выполнять `POST` запросы.

Принимаемые параметры:

- `phone_number`: целое число (начинается с 7)
- `mobile_operator_code`: целое число (3 цифры)
- `sex`: "M" или "W"
- `tag`: произвольный параметр (можно не указывать)

Для просмотра клиентов используется эндпоинт `http://localhost:81/mailing/clients`. Для обращения к нему
нужно выполнять `GET` запросы.


Для просмотра клиента используется эндпоинт `http://localhost:81/mailing/clients/пар`. Для обращения к нему
нужно выполнять `GET` запросы.

⚠ вместо пар указываем id клиента.

Для создания новой рассылки используется эндпоинт `http://localhost:81/mailing/mailings`. Для обращения к нему
нужно выполнять `POST` запросы.

Принимаемые параметры:

- `message`: строка
- `start_datetime`: (пример: "2022-10-31T10:55:00")
- `end_datetime`: (пример: "2022-10-31T22:00:00")
- `client_sex_filter`: "W" или "M"

Для просмотра всех рассылок используется эндпоинт `http://localhost:81/mailing/mailings`. Для обращения к нему
нужно выполнять `GET` запросы:

Для просмотра рассылки используется эндпоинт `http://localhost:8000/mailing/mailings/пар`. Для обращения к нему
нужно выполнять `GET` запросы.

⚠ вместо пар указываем id рассылки.


## Задание

Необходимо реализовать методы создания новой рассылки и просмотр созданных рассылок.

- После создания новой рассылки, если текущее время больше времени начала и меньше времени окончания - должны быть выбраны из справочника все клиенты, которые подходят под значения фильтра, указанного в этой рассылке и запущена отправка для всех этих клиентов.
- Если создаётся рассылка с временем старта в будущем - отправка должна стартовать автоматически по наступлению этого времени без дополнительных действий со стороны пользователя системы.
Сообщения рассылки можно выводить в консоль приложения.



## Автор

Васильев Антон Юрьевич

sortof00@mail.ru
